<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vegetation Fire Risk Monitor</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>

    <!-- App Banner -->
    <div id="appBanner" class="glass-panel p-3 text-center">
        <h2>üî• <strong>Power Line Vegetation Monitor</strong> üî•</h2>
        <p>Visualize California transmission lines and nearby vegetation growth. Track potential fire hazards and alerts
            over time. Use the sidebar to focus on specific cities or coordinates.</p>
    </div>

    <button id="togglePanelsBtn" class="button-17"
        style="position:absolute; top:150px; left:10px; z-index:1200;">‚ò∞</button>

    <!-- Metrics Panel -->
    <div id="metricsPanel" class="glass-panel p-3">
        <h5 class="mb-3 text-center">üìä Live Metrics</h5>
        <div class="metric-item">
            <span class="metric-label">üî¥ Active Alerts</span>
            <span class="metric-value" id="activeAlerts">0</span>
        </div>
        <div class="metric-item">
            <span class="metric-label">üü° Monitored Zones</span>
            <span class="metric-value" id="monitoredZones">0</span>
        </div>
        <div class="metric-item">
            <span class="metric-label">üå± Avg Vegetation</span>
            <span class="metric-value" id="avgVegetation">0.0m</span>
        </div>
        
        <hr style="margin: 1rem 0; border-color: rgba(0, 0, 0, 0.2);">
        
        <h6 class="mb-2 text-center" style="font-size: 0.9rem; font-weight: 700;">ü§ñ AI Risk Assessment</h6>
        <div class="metric-item">
            <span class="metric-label">üéØ ML Risk Level</span>
            <span class="metric-value" id="mlRiskLevel">-</span>
        </div>
        <div class="metric-item">
            <span class="metric-label">üìä Risk Score</span>
            <span class="metric-value" id="mlRiskScore">-</span>
        </div>
        <div class="metric-item">
            <span class="metric-label">‚úì Confidence</span>
            <span class="metric-value" id="mlConfidence">-</span>
        </div>
        
        <button id="notifyAuthorityBtn" class="btn btn-danger w-100 mt-3" style="font-size: 0.8rem; font-weight: 600;">
            üö® Notify Authorities
        </button>
    </div>

    <!-- Merged Sidebar with Tabs -->
    <div id="mergedPanel" class="glass-panel p-3">
        <!-- Tab Navigation -->
        <ul class="nav nav-tabs mb-3" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="tab1-btn" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab">
                    City Focus
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab2-btn" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab">
                    Predictor
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Tab 1: Focus on City or Coordinate -->
            <div class="tab-pane fade show active" id="tab1" role="tabpanel">
                <h3 class="mb-3">Focus on City or Coordinate</h3>

                <label for="citySelect" class="form-label fw-bold">Select City</label>
                <select id="citySelect" class="form-select mb-2">
                    <option value="">-- Select City --</option>
                    <option value="adelanto">Adelanto</option>
                    <option value="agouraHills">Agoura Hills</option>
                    <option value="alameda">Alameda</option>
                    <option value="alhambra">Alhambra</option>
                    <option value="alisoViejo">Aliso Viejo</option>
                    <option value="alpine">Alpine</option>
                    <option value="altadena">Altadena</option>
                    <option value="alturas">Alturas</option>
                    <option value="amador">Amador</option>
                    <option value="americanCanyon">American Canyon</option>
                    <option value="anaheim">Anaheim</option>
                    <option value="anaheimHills">Anaheim Hills</option>
                    <option value="anderson">Anderson</option>
                    <option value="angelsCamp">Angels Camp</option>
                    <option value="angelusOaks">Angelus Oaks</option>
                    <option value="antioch">Antioch</option>
                    <option value="appleValley">Apple Valley</option>
                    <option value="aptos">Aptos</option>
                    <option value="arcadia">Arcadia</option>
                    <option value="arcata">Arcata</option>
                    <option value="arnold">Arnold</option>
                    <option value="arroyoGrande">Arroyo Grande</option>
                    <option value="artesia">Artesia</option>
                    <option value="atascadero">Atascadero</option>
                    <option value="auburn">Auburn</option>
                    <option value="avalon">Avalon</option>
                    <option value="avilaBeach">Avila Beach</option>
                    <option value="azusa">Azusa</option>
                    <option value="bakersfield">Bakersfield</option>
                    <option value="bigbar">Big Bar Mountain</option>
                    <option value="boulderCreek">Boulder Creek</option>
                    <option value="chulaVista">Chula Vista</option>
                    <option value="fresno">Fresno</option>
                    <option value="irvine">Irvine</option>
                    <option value="longBeach">Long Beach</option>
                    <option value="losAngeles">Los Angeles</option>
                    <option value="oakland">Oakland</option>
                    <option value="panocheValley">Panoche Valley Solar Farm</option>
                    <option value="riverside">Riverside</option>
                    <option value="sacramento">Sacramento</option>
                    <option value="sanDiego">San Diego</option>
                    <option value="sanFrancisco">San Francisco</option>
                    <option value="sanJose">San Jose</option>
                    <option value="santaAna">Santa Ana</option>
                    <option value="stockton">Stockton</option>
                </select>

                <label class="form-label fw-bold">Or Input Lat-Long</label>
                <div class="d-flex mb-2">
                    <input type="number" id="latInput" placeholder="Latitude" class="form-control me-1">
                    <input type="number" id="lonInput" placeholder="Longitude" class="form-control">
                </div>

                <button id="goBtn" class="button-17">Go</button>
            </div>

            <!-- Tab 2: Power Line Vegetation Predictor -->
            <div class="tab-pane fade" id="tab2" role="tabpanel">
                <h3 class="mb-3">Power Line Vegetation Predictor</h3>
                <div class="d-flex justify-content-between mb-2">
                    <button id="playBtn" class="button-17">‚ñ∂</button>
                    <button id="pauseBtn" class="button-17">‚è∏</button>
                    <button id="resetBtn" class="button-17">‚ü≤</button>
                </div>

                <label for="dayRange" class="form-label fw-bold">Week: <span id="dayLabel">0</span></label>
                <input id="dayRange" type="range" min="0" max="7" value="0" class="form-range">

                <input type="number" id="jumpDay" min="0" max="7" class="form-control mt-2" placeholder="Jump to week">

                <div id="legend" class="mt-3">
                    <h6><b>Legend</b></h6>
                    <div><span class="swatch low"></span> Low vegetation</div>
                    <div><span class="swatch med"></span> Moderate</div>
                    <div><span class="swatch high"></span> High / Alert</div>
                </div>

                <div id="alertsBox" class="alert-list mt-3">
                    <h6 class="fw-bold">Active Alerts</h6>
                    <div id="alertItems">No active alerts</div>
                </div>
            </div>
        </div>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/main.js"></script>
</body>

</html>